Version 1 of Navigation by Core Mechanics begins here.

[ Note: The city areas and locations within are sorted alphabetically. Please put new rooms in the right spots as you add them ]
Table of Navigation locations
RoomObject	RoomName	NavText	NavList
Grey Abbey Library	"Grey Abbey Library"	"Grey Abbey Library"	"Primary Rooms"
Outside Trevor Labs	"Trevor Labs"	"Outside Trevor Labs"	"Primary Rooms"
Approaching the Capitol Building	"Approaching the Capitol Building"	"Approaching the Capitol Building"	"Capitol District"
Disused Garage	"Disused Garage"	"Disused Garage"	"Capitol District"
Office Den	"Office Den"	"Office Den"	"Capitol District"
Orc Lair Side Entrance	"Orc Lair"	"Orc Lair Side Entrance"	"Capitol District"
Camp Bravo Entrance	"Camp Bravo"	"Camp Bravo Entrance"	"Central City"
Gaming Den	"Gaming Den"	"Gaming Den"	"Central City"
Green Apartment Building	"Green Apartment Building"	"Green Apartment Building"	"Central City"
Fire Station 86	"Fire Station 86"	"Fire Station 86"	"Central City"
Milking Facility Entrance	"Milking Facility Entrance"	"Milking Facility Entrance"	"Central City"
Mini-Lab	"Mini-Lab"	"Mini-Lab"	"Central City"
Pediatrics Lobby	"Pediatrics Lobby"	"Pediatrics Lobby"	"Central City"
Pig Pen	"Pig Pen"	"Pig Pen"	"Central City"
Police Station Twelve	"Police Station Twelve"	"Police Station Twelve"	"Central City"
Rabbit Den	"Rabbit Den"	"Rabbit Den"	"Central City"
Red Apartment	"Red Apartment"	"Red Apartment"	"Central City"
Tyr's Club	"Tyr's Club"	"Tyr's Club"	"Central City"
Park Entrance	"Park Entrance"	"Park Entrance"	"City Park"
Equinoid Camp	"Equinoid Camp"	"Equinoid Camp"	"City Park"
Lion's Den	"Lion's Den"	"Lion's Den"	"City Park"
Smith Haven Mall Lot South	"Smith Haven Mall"	"Smith Haven Mall Lot South"	"Commercial District"
Back Alley	"Back Alley"	"Back Alley"	"Commercial District"
Comic Shop	"Comic Shop"	"Comic Shop"	"Commercial District"
Isolated Street	"Isolated Street"	"Isolated Street"	"Commercial District"
K9 Vans	"K9 Vans"	"K9 Vans"	"Commercial District"
Kristen's Hideout	"Kristen's Hideout"	"Kristen's Hideout"	"Commercial District"
Lingerie Store	"Lingerie Store"	"Lingerie Store"	"Commercial District"
New Ewe Storeroom	"New Ewe Store"	"New Ewe Storeroom"	"Commercial District"
Slut Rat Den	"Slut Rat Den"	"Slut Rat Den"	"Commercial District"
The Palomino	"The Palomino"	"The Palomino"	"Commercial District"
Froggy Hideout	"Froggy Hideout"	"Froggy Hideout"	"Commercial District"
Dry Plains	"Dry Plains"	"Dry Plains"	"Dry Plains"
McDermott Farm Entrance	"McDermott Farm Entrance"	"McDermott Farm Entrance"	"Dry Plains"
Rocky Outcropping	"Rocky Outcropping"	"Rocky Outcropping"	"Dry Plains"
State Fair	"State Fair"	"State Fair"	"Fairgrounds"
Sweet Tooth	"Sweet Tooth"	"Sweet Tooth"	"Fairgrounds"
Entrance to the High Rise District	"Entrance to the High Rise District"	"Entrance to the High Rise District"	"High Rise District"
Agency	"Agency"	"Agency"	"High Rise District"
Alex's Condo	"Alex's Condo"	"Alex's Condo"	"High Rise District"
Argos Antiques	"Argos Antiques"	"Argos Antiques"	"High Rise District"
Bone-Appetit	"Bone-Appetit"	"Bone-Appetit"	"High Rise District"
Butterfly Grove	"Butterfly Grove"	"Butterfly Grove"	"High Rise District"
Flower Garden	"Flower Garden"	"Flower Garden"	"High Rise District"
Lizard Parlor	"Lizard Parlor"	"Lizard Parlor"	"High Rise District"
Rex's Place	"Rex's Place"	"Rex's Place"	"High Rise District"
Zephyr Lobby	"Zephyr"	"Zephyr Lobby"	"High Rise District"
City Hospital	"City Hospital"	"City Hospital"	"Hospital"
Psych Department	"Psych Department"	"Psych Department"	"Hospital"
Nutso Factory	"Nutso Factory"	"Nutso Factory"	"Industrial Sector"
Plant Overview	"Plant Overview"	"Plant Overview"	"Industrial Sector"
Power Lines	"Power Lines"	"Power Lines"	"Industrial Sector"
Abandoned Lot	"Abandoned Lot"	"Abandoned Lot"	"Junkyard"
Hyena Shack	"Hyena Shack"	"Hyena Shack"	"Junkyard"
Steven's Home	"Steven's Home"	"Steven's Home"	"Junkyard"
Foxy Hideaway	"Foxy Hideaway"	"Foxy Hideaway"	"Misc"
Qytat Plaza	"Qytat Plaza"	"Qytat Plaza"	"Misc"
Shifting Room	"Shifting Room"	"Shifting Room"	"Misc"
Museum Foyer	"Museum Foyer"	"Museum Foyer"	"Museum"
Egypt Wing Entrance	"Egypt Wing Entrance"	"Egypt Wing Entrance"	"Museum"
Entrance to the Red Light District	"Entrance to the Red Light District"	"Entrance to the Red Light District"	"Red Light District"
Bradford's Camp	"Bradford's Camp"	"Bradford's Camp"	"Red Light District"
Bright Alley	"Bright Alley"	"Bright Alley"	"Red Light District"
Burned-Out Chapel	"Burned-Out Chapel"	"Burned-Out Chapel"	"Red Light District"
Cuero Lobo	"Cuero Lobo"	"Cuero Lobo"	"Red Light District"
Down Under Pub	"Down Under Pub"	"Down Under Pub"	"Red Light District"
Gillian's Flat	"Gillian's Flat"	"Gillian's Flat"	"Red Light District"
Police Car	"Police Car"	"Police Car"	"Red Light District"
Porn Store	"Porn Store"	"Porn Store"	"Red Light District"
Sanctuary Alleyway	"Sanctuary Alleyway"	"Sanctuary Alleyway"	"Red Light District"
Sven's Place	"Sven's Place"	"Sven's Place"	"Red Light District"
Tattoo Parlor	"Tattoo Parlor"	"Tattoo Parlor"	"Red Light District"
Beach Plaza	"Beach Plaza"	"Beach Plaza"	"Seaside"
Bouncy Castle	"Bouncy Castle"	"Bouncy Castle"	"Seaside"
Island Pier	"Island Pier"	"Island Pier"	"Seaside"
Pirate Island	"Pirate Island"	"Pirate Island"	"Seaside"
Viking Ship	"Viking Ship"	"Viking Ship"	"Seaside"
Stables Hotel	"Stables Hotel"	"Stables Hotel"	"The Stables"
Master's Office	"Master's Office"	"Master's Office"	"The Stables"
College Campus	"College Campus"	"College Campus"	"Tenvale College"
Astroslide Football Field	"Astroslide Football Field"	"Astroslide Football Field"	"Tenvale College"
Campus Gym	"Campus Gym"	"Campus Gym"	"Tenvale College"
Paleontology Office	"Paleontology Office"	"Paleontology Office"	"Tenvale College"
Phi Iota Gamma	"Phi Iota Gamma"	"Phi Iota Gamma"	"Tenvale College"
Urban Forest	"Urban Forest"	"Urban Forest"	"Urban Forest"
Bunny House	"Bunny House"	"Bunny House"	"Urban Forest"
Deep Forest	"Deep Forest"	"Deep Forest"	"Urban Forest"
Staghorn	"Staghorn"	"Staghorn"	"Urban Forest"
Happy Puppy Kennel	"Happy Puppy Kennel"	"Happy Puppy Kennel"	"Urban Forest"
Ironscale Hollow	"Ironscale Hollow"	"Ironscale Hollow"	"Urban Forest"
Avalon-Crossroads	"Avalon-Crossroads"	"Avalon-Crossroads"	"Urban Forest"
Warehouse District	"Warehouse District"	"Warehouse District"	"Warehouse District"
Hyena Hideout	"Hyena Hideout"	"Hyena Hideout"	"Warehouse District"
Mike's Home	"Mike's Home"	"Mike's Home"	"Warehouse District"
Spider's Web	"Spider's Web"	"Spider's Web"	"Warehouse District"
Wolfman Lair	"Wolfman Lair"	"Wolfman Lair"	"Warehouse District"
Zoo Entrance	"Zoo Entrance"	"Zoo Entrance"	"Zoo"
Gator Den	"Gator Den"	"Gator Den"	"Zoo"
Tiger Den	"Tiger Den"	"Tiger Den"	"Zoo"

destinationcheck is an action applying to nothing.

understand "navigate" as destinationcheck.
understand "nav" as destinationcheck.

carry out destinationcheck:
	let PrintedPrimaryRooms be 0;
	let PrintedCapitolDistrict be 0;
	let PrintedCentralCity be 0;
	let PrintedCityPark be 0;
	let PrintedCommercialDistrict be 0;
	let PrintedDryPlains be 0;
	let PrintedFairgrounds be 0;
	let PrintedHighRiseDistrict be 0;
	let PrintedHospital be 0;
	let PrintedIndustrialSector be 0;
	let PrintedJunkyard be 0;
	let PrintedMisc be 0;
	let PrintedMuseum be 0;
	let PrintedRedLightDistrict be 0;
	let PrintedSeaside be 0;
	let PrintedTheStables be 0;
	let PrintedTenvaleCollege be 0;
	let PrintedUrbanForest be 0;
	let PrintedWarehouseDistrict be 0;
	let PrintedZoo be 0;
	repeat with x running from 1 to the number of rows in the Table of Navigation locations:
		choose row x in the Table of Navigation locations;
		if RoomObject entry is known:
			if NavList entry is:
				-- "Primary Rooms":
					say "[if PrintedPrimaryRooms is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedPrimaryRooms;
				-- "Capitol District":
					say "[if PrintedCapitolDistrict is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedCapitolDistrict;
				-- "Central City":
					say "[if PrintedCentralCity is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedCentralCity;
				-- "City Park":
					say "[if PrintedCityPark is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedCityPark;
				-- "Commercial District":
					say "[if PrintedCommercialDistrict is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedCommercialDistrict;
				-- "Dry Plains":
					say "[if PrintedDryPlains is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedDryPlains;
				-- "Fairgrounds":
					say "[if PrintedFairgrounds is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedFairgrounds;
				-- "High Rise District":
					say "[if PrintedHighRiseDistrict is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedHighRiseDistrict;
				-- "Hospital":
					say "[if PrintedHospital is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedHospital;
				-- "Industrial Sector":
					say "[if PrintedIndustrialSector is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedIndustrialSector;
				-- "Junkyard":
					say "[if PrintedJunkyard is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedJunkyard;
				-- "Misc":
					say "[if PrintedMisc is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedMisc;
				-- "Museum":
					say "[if PrintedMuseum is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedMuseum;
				-- "Red Light District":
					say "[if PrintedRedLightDistrict is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedRedLightDistrict;
				-- "Seaside":
					say "[if PrintedSeaside is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedSeaside;
				-- "The Stables":
					say "[if PrintedTheStables is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedTheStables;
				-- "Tenvale College":
					say "[if PrintedTenvaleCollege is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedTenvaleCollege;
				-- "Urban Forest":
					say "[if PrintedUrbanForest is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedUrbanForest;
				-- "Warehouse District":
					say "[if PrintedWarehouseDistrict is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedWarehouseDistrict;
				-- "Zoo":
					say "[if PrintedZoo is 0][line break][bold type][NavList entry][roman type]: [else] | [end if][link][bracket][RoomName entry][close bracket][as]nav [NavText entry][end link]";
					increment PrintedZoo;
	LineBreak;

navigating is an action applying to one thing.

understand "navigate [any known fasttravel room]" as navigating.
understand "navigate to [any known fasttravel room]" as navigating.
understand "nav [any known fasttravel room]" as navigating.
understand "nav to [any known fasttravel room]" as navigating.
understand "travel [any known fasttravel room]" as navigating.
understand "travel to [any known fasttravel room]" as navigating.
understand "go to [any known fasttravel room]" as navigating.
understand "return to [any known fasttravel room]" as navigating.

carry out navigating:
	if location of Player is not fasttravel:
		say "You can't navigate from here.";
		stop the action;
	if noun is location of Player:
		say "You're already there.";
		stop the action;
	let the bonus be (( the perception of the player minus 10 ) divided by 2);
	now battleground is "Outside";
	if a random number from 1 to 20 < 10 minus bonus and battleground is not "void":
		if there is a area of Battleground in the Table of Random Critters:
			Fight;
			if ( ( hardmode is true and a random chance of 1 in 8 succeeds ) or ( "Bad Luck" is listed in feats of Player and a random chance of 1 in 8 succeeds ) ) and battleground is not "void":
				say "As you are trying to recover from your last encounter, another roving creature finds you.";
				Fight;
	else:
		say "You travel to [the noun], avoiding trouble as best you can.";
	if HP of Velos > 2, move Velos to the noun;
	move player to the noun;
	follow the ngraphics_blank rule;
	follow turnpass rule;

NavCheckReturn is a truth state that varies.

to say NavCheck (CheckRoom - a room): [check if a nav attempt can go through]
	if debugactive is 1:
		say "DEBUG -> NavCheck just checked your travel route out! <- DEBUG";
	if location of Player is not fasttravel:
		say "You can't navigate from here.";
		now NavCheckReturn is false;
	else if location of Player is CheckRoom:
		say "You're already here.";
		now NavCheckReturn is false;
	else:
		if debugactive is 1:
			say "DEBUG -> ...and you may travel. Pass along now. <- DEBUG";
		now NavCheckReturn is true;

Navigation ends here.
